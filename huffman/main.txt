#include<iostream>#include<fstream>#include<cstring>#include<limits>#include"huffman.h"usingnamespacestd;voidHuffmanTree::insert(constchar&data,constdouble&wt){//æ’å…¥ç»“ç‚¹if(2*currentSize->maSize)//ååç»“ç‚¹nçå“åææå…æ2n-ç»“ç‚¹return;arraTreecurrentSize.infodata;arraTreecurrentSize.weightwt;currentSize;voidHuffmanTree::reverse(chararr){//ååçconstintlenstrlen(arr);char*p;pnewcharlen;strcp(p,arr);plen;int;for(intilen-;i>;i--)arrip;arrlen;deletep;intHuffmanTree::findosition(constchar&ch)const{//ååçchåarraTreeççfor(inti;i<currentSize;i)if(arraTreei.infoch)returni;return-;intHuffmanTree::getongestodeength()const{//åççæç»coderraåæçççççif(currentSize)return-;intlenstrlen(coderra.ptr);inti;while(i<currentSize){inttmpstrlen(coderrai.ptr);if(tmp>len)lentmp;i;returnlen;intHuffmanTree::isual(constchar*s)const{//åæsçççæååå¥åååççåæç»coderraççååå-for(inti;i<currentSize;i)if(strlen(s)strlen(coderrai.ptr))//å»¥å»ææif(strcmp(s,coderrai.ptr))returni;return-;voidHuffmanTree::print(){//æ“åççint;while(<currentSize){cout<<arraTree.info<<(<<arraTree.weight<<"):"<<coderra.ptr<<endl;;voidHuffmanTree::createHuffmanTree(){//æhuffmanTreeinticurrentSize;int;doublewt,wt2;intlnode,rnode;while(i<2*currentSize-){wtwt2numericlimits<double>::ma();;while(<i){if(arraTree.parent-){if(arraTree.weight<wt){wt2wt;rnodelnode;wtarraTree.weight;lnode;elseif(arraTree.weight<wt2){wt2arraTree.weight;rnode;;arraTreei.weightarraTreelnode.weightarraTreernode.weight;arraTreei.lchildlnode;arraTreei.rchildrnode;arraTreelnode.parentarraTreernode.parenti;i;voidHuffmanTree::createHuffmanode(){//æhuffmanodeåå“åæççcoderranewodecurrentSize;inti;int,n,m;cout<<arraTreei.parent;while(i<currentSize){arraTreei.parent;n;mi;while(-&&<currentSize*2-){if(arraTree.lchildm)coderrai.ptrn;elseif(arraTree.rchildm)coderrai.ptrn;m;arraTreem.parent;coderrai.ptrn;reverse(coderrai.ptr);//ååç¹åææççççi;voidHuffmanTree::run(){//runåæçåç//æ“åmain.cppæ“å…¥ifstreamfilen("/home/panis/lionroects/huffman/huffman.cpp",ios::in);if(filen){cerr<<"could""not""open."<<endl;eit();charch;intpos;//»æ»»å…¥åçå¹ç»ååçæfilen>>ch;while(filen&&filen.eof()){posfindosition(ch);if(pos-)arraTreepos.weight;elseinsert(ch,);filen>>ch;createHuffmanTree();//æhuffmanæcreateHuffmanode();//å¹ç»åççç//æ“åmain.huffæ“åofstreamfileut("/home/panis/lionroects/huffman/main.huff",ios::trunc);if(fileut){cerr<<"could""not""open."<<endl;eit();filen.clear();//åæ“å…¥æ,æofstreamææflush()æ¹æifstreamåæflush()æ¹æfilen.seeg(,ios::beg);//ææ»çåçççå¹åå…¥outilenameæ»filen>>ch;while(filen&&filen.eof()){posfindosition(ch);if(pos-)fileut<<coderrapos.ptr;filen>>ch;filen.close();fileut.close();//“å…¥“åfilen.open("/home/panis/lionroects/huffman/main.huff",ios::in);fileut.open("/home/panis/lionroects/huffman/main.tt",ios::trunc);if(filenfileut){cerr<<"ilecouldnotopen."<<endl;eit();//æoutileameæ»ççççå¹æçç»“æåå…¥secondutameæ»constintlongestengetongestodeength();char*pnewcharlongesten;int;filen>>ch;while(filen&&filen.eof()){if(<longesten){pch;p;posisual(p);if(pos-){fileut<<arraTreepos.info;;else{cerr<<"Thecodeiswrong."<<endl;eit();filen>>ch;filen.close();fileut.close();